<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PropertyWize Decision Tool â€” Modular Scaffold</title>
  <link rel="stylesheet" href="./src/styles.css" />
</head>
<body class="pw-body">
  <header class="pw-header">
    <h1 class="pw-title">PropertyWize Decision Tool</h1>
    <div id="pw-status" class="pw-status">Ready</div>
  </header>

  <nav class="pw-nav">
    <button data-section="maintenance">Maintenance Dispatch</button>
    <button data-section="delinquency">Delinquency</button>
    <button data-section="ownerPlans">Owner Plans</button>
    <button data-section="finance">Finance / Bills</button>
    <button data-section="staleListing">Stale Listing</button>
  </nav>

  <main id="pw-outlet" class="pw-outlet" aria-live="polite"></main>

  <aside class="pw-debug">
    <details>
      <summary>ðŸ›  Debug Panel</summary>
      <div id="pw-debug-log" class="pw-debug-log"></div>
      <div class="pw-debug-controls">
        <label><input type="checkbox" id="pw-flag-isolated" /> Isolate current section (no cross-wiring)</label>
        <button id="pw-clear-log">Clear Log</button>
      </div>
    </details>
  </aside>

  <footer class="pw-footer">
    <small>v0.1 â€¢ Modular scaffold to keep sections isolated and easy to fix.</small>
  </footer>

  <script type="module">
    import { PW } from './src/core/pw.js';
    import './src/core/router.js';
    import './src/core/state.js';
    import './src/core/utils.js';

    // Register modules (each lives in src/modules/*.js)
    import maintenance from './src/modules/maintenance.js';
    import delinquency from './src/modules/delinquency.js';
    import ownerPlans from './src/modules/ownerPlans.js';
    import finance from './src/modules/finance.js';
    import staleListing from './src/modules/staleListing.js';

    // Map Section IDs to modules once, in one place
    PW.registerSection('maintenance', maintenance);
    PW.registerSection('delinquency', delinquency);
    PW.registerSection('ownerPlans', ownerPlans);
    PW.registerSection('finance', finance);
    PW.registerSection('staleListing', staleListing);

    // Wire up nav
    document.querySelectorAll('.pw-nav [data-section]').forEach(btn => {
      btn.addEventListener('click', () => PW.router.go(btn.dataset.section));
    });

    // Debug panel
    document.getElementById('pw-clear-log').addEventListener('click', () => PW.utils.clearLog());
    document.getElementById('pw-flag-isolated').addEventList
